var seadSpaces={}
seadSpaces.projects=["https://ifri.ncsa.illinois.edu/acr","https://hydroshare.ncsa.illinois.edu/acr","https://colombiaflood.ncsa.illinois.edu/acr","https://sead-test.ncsa.illinois.edu/acr","https://erentp.ncsa.illinois.edu/acr","https://sbdc.ncsa.illinois.edu/acr","https://sead.ncsa.illinois.edu/acr","https://sen.ncsa.illinois.edu/acr","http://imlczo-sead.ncsa.illinois.edu/acr","https://irbo.ncsa.illinois.edu/acr","https://bgcumbs.ncsa.illinois.edu/acr","https://wsc-reach.ncsa.illinois.edu/acr","https://sead-open.ncsa.illinois.edu/acr","https://glwis.ncsa.illinois.edu/acr","https://nced.ncsa.illinois.edu/acr","https://wcparc.ncsa.illinois.edu/acr","https://neon.ncsa.illinois.edu/acr","https://lse.ncsa.illinois.edu/acr","https://lowermississippi.ncsa.illinois.edu/acr","https://sead-demo.ncsa.illinois.edu/acr","https://umbio.ncsa.illinois.edu/acr","https://ccc.ncsa.illinois.edu/acr"],seadSpaces.doAjax=function(s){return $.ajax({url:s,dataType:"jsonp",data:{format:"json"},type:"GET",success:function(s){}})},seadSpaces.abbreviateNumber=function(s){var e=s
if(s>=1e3){for(var a=["","k","m","b","t"],t=Math.floor((""+s).length/3),i="",c=2;c>=1;c--){i=parseFloat((0!=t?s/Math.pow(1e3,t):s).toPrecision(c))
var r=(i+"").replace(/[^a-zA-Z 0-9]+/g,"")
if(r.length<=2)break}i%1!=0&&(shortNum=i.toFixed(1)),e=i+a[t]}return e},seadSpaces.initSort=function(){var s={valueNames:["name","fade-in-content","published","views","collections","teammates","datasets_raw"]},e=new List("project-spaces-dashboard",s)
e.sort("name",{order:"asc"}),$("#sort-views").click(function(){$(".sort").removeClass("active"),$(this).addClass("active"),e.sort("views",{order:"desc"})}),$("#sort-users").click(function(){$(".sort").removeClass("active"),$(this).addClass("active"),e.sort("teammates",{order:"desc"})}),$("#sort-name").click(function(){$(".sort").removeClass("active"),$(this).addClass("active"),e.sort("name",{order:"asc"})}),$("#sort-collections").click(function(){$(".sort").removeClass("active"),$(this).addClass("active"),e.sort("collections",{order:"desc"})}),$("#sort-datasets").click(function(){$(".sort").removeClass("active"),$(this).addClass("active"),e.sort("datasets_raw",{order:"desc"})}),$("#filter-published").click(function(){return e.filter(function(s){return s.values().published>0?!0:!1}),$(".filter").removeClass("active"),$(this).addClass("active"),!1}),$("#reset-button").click(function(){$("#search-field").val(""),e.search(),e.sort("name",{order:"asc"}),e.filter(),$(".filter").removeClass("active"),$(".sort").removeClass("active")}),$("#loading-spinner").remove()},seadSpaces.formatBytes=function(s,e){if(0==s)return"0 Byte"
var a=1e3,t=e+1||3,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(s)/Math.log(a))
return(s/Math.pow(a,c)).toPrecision(t)+" "+i[c]},seadSpaces.buildGrid=function(s,e,a,t,i,c,r,o,n,l,d,p,u,f,h){var v=""
v+='<div class="span4">',v+='<div class="space-wrapper">',v+='<a href="'+h+'"><div class="fade-wrapper">',v+='<div class="fade-out" style="background-image:url('+i+"),url("+r+');">',v+="</div>",t&&(v+='<div class="fade-in"><div class="fade-in-content">'+t.replace(/<(?:.|\n)*?>/gm,"")+"</div></div>"),v+="</div></a>",v+='<div class="space-stats">',v+='<h4><a href="'+h+'" class="name">'+a+"</a></h4>",v+="<ul>",d&&(v+='<li class="views" title="'+d+' views"><i class="fa fa-lg fa-eye"></i> '+d+"</li>"),l&&(v+='<li class="teammates" title="'+l+' contributors"><i class="fa fa-lg fa-user"></i> '+l+"</li>"),p&&(v+='<li class="collections" title="'+p+' collections"><i class="fa fa-lg fa-folder"></i> '+p+"</li>"),o&&(v+='<li class="datasets" title="'+o+' datasets"><i class="fa fa-lg fa-database"></i> '+o+"</li>"),n&&(v+='<li class="datasets_raw">'+n+"</li>"),u&&(v+='<li class="published" title="'+u+' published dataset"><i class="fa fa-lg fa-folder-open"></i> '+u+"</li>"),v+="<ul>",v+="</div>",v+="</div>",v+="</div>",$(".project-spaces-dashboard .row-fluid").append(v),e==s&&seadSpaces.initSort()},seadSpaces.init=function(){var s=1,e=seadSpaces.projects.length
$.each(seadSpaces.projects,function(a,t){var i="http://www.whateverorigin.org/get?url="+t+"/resteasy/sys/config",c="http://www.whateverorigin.org/get?url="+t+"/resteasy/sys/info"
$.when(seadSpaces.doAjax(i),seadSpaces.doAjax(c)).done(function(a,i){console.log(i)
var c=a[0].contents["project.name"],r=a[0].contents["project.description"],o=a[0].contents["project.header.logo"],n=a[0].contents["project.header.title.color"],l=a[0].contents["project.header.background"]
"undefined"!=typeof l&&"resteasy"==l.substring(0,8)&&(l=t+"/"+l),"undefined"!=typeof o&&"images"==o.substring(0,6)&&(o=t+"/"+o)
var d=i[0].contents["Total number of bytes"],p=seadSpaces.abbreviateNumber(i[0].contents.Datasets),u=i[0].contents.Datasets,f=seadSpaces.abbreviateNumber(i[0].contents["Number of Users"]),h=seadSpaces.abbreviateNumber(i[0].contents["Total Views"]),v=seadSpaces.abbreviateNumber(i[0].contents["Collections "]),b=seadSpaces.abbreviateNumber(i[0].contents["Published Collections"])
seadSpaces.buildGrid(e,s,c,r,o,n,l,p,u,f,h,v,b,d,t),s++})})},seadSpaces.init()
